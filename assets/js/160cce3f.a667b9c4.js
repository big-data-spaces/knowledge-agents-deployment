"use strict";(self.webpackChunkcatenax_ng=self.webpackChunkcatenax_ng||[]).push([[183],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return h}});var a=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=a.createContext({}),c=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},u=function(e){var t=c(e.components);return a.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,l=e.originalType,s=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),d=c(n),h=o,g=d["".concat(s,".").concat(h)]||d[h]||p[h]||l;return n?a.createElement(g,r(r({ref:t},u),{},{components:n})):a.createElement(g,r({ref:t},u))}));function h(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var l=n.length,r=new Array(l);r[0]=d;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:o,r[1]=i;for(var c=2;c<l;c++)r[c]=n[c];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},379:function(e,t,n){n.r(t),n.d(t,{assets:function(){return u},contentTitle:function(){return s},default:function(){return h},frontMatter:function(){return i},metadata:function(){return c},toc:function(){return p}});var a=n(7462),o=n(3366),l=(n(7294),n(3905)),r=["components"],i={sidebar_position:3,title:"Tutorial (Knowledge Agents Spike)"},s=void 0,c={unversionedId:"spike",id:"spike",title:"Tutorial (Knowledge Agents Spike)",description:"If you do not want to compile the sources on your own, you may directly start with Deployment",source:"@site/docs/spike.md",sourceDirName:".",slug:"/spike",permalink:"/product-knowledge/docs/spike",editUrl:"https://github.com/catenax-ng/product-knowledge/edit/main/docs/spike.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3,title:"Tutorial (Knowledge Agents Spike)"},sidebar:"tutorialSidebar",previous:{title:"How To (Pilot)",permalink:"/product-knowledge/docs/howto"}},u={},p=[{value:"Building under MacOS/M=&gt;1",id:"building-under-macosm1",level:2},{value:"Building/Patching Jena",id:"buildingpatching-jena",level:2},{value:"Building/Patching Eclipse Dataspace Connector",id:"buildingpatching-eclipse-dataspace-connector",level:2},{value:"Building Knowledge Agents",id:"building-knowledge-agents",level:2},{value:"Running the Spike components",id:"running-the-spike-components",level:2},{value:"Using a Helm Chart/Kubernetes Deployment",id:"using-a-helm-chartkubernetes-deployment",level:2},{value:"Login and Welcome",id:"login-and-welcome",level:2},{value:"Knowledge Explorer",id:"knowledge-explorer",level:2},{value:"Part Tracing Skill",id:"part-tracing-skill",level:2},{value:"Switching Agents and the Material Aggregation Skill",id:"switching-agents-and-the-material-aggregation-skill",level:2},{value:"German Speech Output and the Lot Impact Skill",id:"german-speech-output-and-the-lot-impact-skill",level:2},{value:"How to I extend skills?",id:"how-to-i-extend-skills",level:2}],d={toc:p};function h(e){var t=e.components,i=(0,o.Z)(e,r);return(0,l.kt)("wrapper",(0,a.Z)({},d,i,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("p",null,"If you do not want to compile the sources on your own, you may directly start with ",(0,l.kt)("a",{parentName:"p",href:"#deployment-using-docker"},"Deployment")),(0,l.kt)("p",null,"If you are a member of the Catena-X consortium, you could directly start with ",(0,l.kt)("a",{parentName:"p",href:"#interacting-with-the-spike-apis-and-the-portal"},"Interacting with the Spike APIs and the Portal"),"."),(0,l.kt)("h1",{id:"source-repository"},"Source Repository"),(0,l.kt)("p",null,"You will find the source code of the Spike  under ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/catenax-ng/product-knowledge/tree/feature/ART3-375-spike"},"https://github.com/catenax-ng/product-knowledge")," "),(0,l.kt)("p",null,"Be sure to initialise the git submodules after cloning the repo"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-console"},"git submodule update --init --recursive\n")),(0,l.kt)("h1",{id:"building-packages-and-running-locally"},"Building Packages and Running Locally"),(0,l.kt)("p",null,"You will need a JDK>=11 installed in the JAVA_HOME environment variable.\nYou will need Apache Maven installed in the PATH environment variable.\nYou will need internet access and (optionally) a proxy installed in the HTTP_PROXY_HOST and HTTP_PROXY_PORT environment variables.\nYou will need node.js/npm installed.\nThe build process will install a (local) gradle build tool during the run."),(0,l.kt)("h2",{id:"building-under-macosm1"},"Building under MacOS/M=>1"),(0,l.kt)("p",null,"There is currently ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/square/okhttp/issues/6943"},"no auto-configurable Java 11 toolchain for gradle"),"."),(0,l.kt)("p",null,"We recommend to download/install the ",(0,l.kt)("a",{parentName:"p",href:"https://www.azul.com/downloads/?os=macos&architecture=arm-64-bit&package=jdk"},"Azul JDK 11")," and execute the\nfollowing commands"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"# Adapt to the path of your Azul JDK11\nexport JDK11=~/Projects/jdk/zulu11.54.25-ca-jdk11.0.14.1-macosx_aarch64\nexport GRADLE_PROPS=(--no-parallel -Porg.gradle.java.installations.fromEnv=JDK11 -Pversion=0.0.3-CATENAX)\n")),(0,l.kt)("p",null,"If you want to run the resulting docker images locally without emulation (and do not plan to publish them to non-Apple registries),\nyou may also"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"# Use the right docker platform for running\nexport DOCKER_PLATFORM=linux/arm64\n")),(0,l.kt)("h2",{id:"buildingpatching-jena"},"Building/Patching Jena"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-console"},"cd jena\ngit apply ../src/patch/jena.patch\ncd jena-fuseki2\nmvn install -DskipTests -Denforcer.skip=true -Dmaven.javadoc.skip=true\ncd ..\ngit restore .\ncd ..\n")),(0,l.kt)("h2",{id:"buildingpatching-eclipse-dataspace-connector"},"Building/Patching Eclipse Dataspace Connector"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-console"},"cd DataSpaceConnector\n./gradlew $GRADLE_PROPS -Dhttps.proxyHost=${HTTP_PROXY_HOST} -Dhttps.proxyPort=${HTTP_PROXY_PORT} publishToMavenLocal -x test\ncd ..\n")),(0,l.kt)("h2",{id:"building-knowledge-agents"},"Building Knowledge Agents"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-console"},"./gradlew $GRADLE_PROPS -Dhttps.proxyHost=${HTTP_PROXY_HOST} -Dhttps.proxyPort=${HTTP_PROXY_PORT} build\n")),(0,l.kt)("h2",{id:"running-the-spike-components"},"Running the Spike components"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-console"},"# Run a single backend data plane\n./run_local.sh -complete -internal &\n# Run three agents\n./run_local.sh -tenant1 -external &\n./run_local.sh -tenant2 -external &\n./run_local.sh -central -external &\n# Run the portal\ncd tractusx/portal/code/tractus-x-portal\nnpm install npm@latest --force\nnpm start\n")),(0,l.kt)("h1",{id:"deployment-using-docker"},"Deployment using Docker"),(0,l.kt)("p",null,"Once the packages are compiled, the following command will build all docker images"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-console"},"docker compose build\n")),(0,l.kt)("p",null,"If you are a member of the Catena-X consortium, you may also use a ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/catenax-ng/product-knowledge/blob/feature/ART3-375-spike/README.md"},"script")," to publishes the resulting images (only linux/amd64) directly to the Catena-X registry (for which you need a valid and catenax-ng enabled github account)."),(0,l.kt)("p",null,"The following images are built (and aalso publically available for direct pull under linux/amd64):"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-console"},"docker pull ghcr.io/catenax-ng/product-knowledge/data-plane-agent:0.0.1\ndocker pull ghcr.io/catenax-ng/product-knowledge/control-plane:0.0.1\ndocker pull ghcr.io/catenax-ng/product-knowledge/portal:0.0.1\n")),(0,l.kt)("p",null,"Running the spike via docker is then done via"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-console"},"docker compose up\n")),(0,l.kt)("h2",{id:"using-a-helm-chartkubernetes-deployment"},"Using a Helm Chart/Kubernetes Deployment"),(0,l.kt)("p",null,"You could mount the ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/catenax-ng/product-knowledge/tree/feature/ART3-375-spike/helm"},"helm folder of the repository"),"  also in Argo CD or\nan equivalent mechanism. "),(0,l.kt)("p",null,"Please be aware that this is currently not configurable, e.g. to non-Catena-X environments."),(0,l.kt)("h1",{id:"interacting-with-the-spike-apis-and-the-portal"},"Interacting with the Spike APIs and the Portal"),(0,l.kt)("p",null,"You should now be able to access the APIs via this public Postman Workspace ",(0,l.kt)("a",{parentName:"p",href:"https://www.postman.com/catena-x/workspace/catena-x-knowledge-agents"},"https://www.postman.com/catena-x/workspace/catena-x-knowledge-agents"),' (choose the "Localhost" environment - no additional credentials needed - and the "Hey Catena! Spike" Collection).'),(0,l.kt)("p",null,"As an alternative, you may import the ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/catenax-ng/product-knowledge/blob/feature/ART3-375-spike/federation.postman_collection.json"},"Postman Collection")," into the REST IDE of your choice."),(0,l.kt)("p",null,'If you are a member of the Catena-X consortium, you may also directly switch to the "Integration" environment and populate the lacking secrets with information from ',(0,l.kt)("a",{parentName:"p",href:"https://confluence.catena-x.net/x/1wHrAg"},"our Catena-x confluence page"),". You will then access the already deployed system."),(0,l.kt)("p",null,"You may need to execute the first two upload commands in the Data Plane (internal) folder to populate the backend."),(0,l.kt)("p",null,"You should then be able to access the portal via http://localhost:3000 for which you need an account in the Catena-X Speedboat directory.\nAnd you should use Google Chrome (because of the pre-installed HTML5-speechkit voices)."),(0,l.kt)("p",null,"If you are a member of the Catena-X consortium, you may also directly login to the ",(0,l.kt)("a",{parentName:"p",href:"https://hey.int.demo.catena-x.net/portal"},"Integration Environment")," information from ",(0,l.kt)("a",{parentName:"p",href:"https://confluence.catena-x.net/x/1wHrAg"},"our Catena-x confluence page"),". "),(0,l.kt)("h1",{id:"what-the-demo-shows"},"What the demo shows"),(0,l.kt)("h2",{id:"login-and-welcome"},"Login and Welcome"),(0,l.kt)("p",null,'After a successful login (for which you will need a login in a Speedboat-compatible Directory Service) you will enter the dashboard which shows your "booked" services and apps.'),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"Spike Login",src:n(6113).Z,width:"1919",height:"1124"})),(0,l.kt)("p",null,"Here you will see that there are several agents (Cortana, TINA) subscribed (as computation services to which you can dump computations=queries)."),(0,l.kt)("p",null,"You will also see that there are several skills (=predefined queries, such as Material Aggregation, Part Tracing and Lot Impact) already unlocked."),(0,l.kt)("p",null,'Both the agents and the skills will appear again in the Knowledge Explorer (linked in the welcome screen and as "knowledge" in the top menu).'),(0,l.kt)("h2",{id:"knowledge-explorer"},"Knowledge Explorer"),(0,l.kt)("p",null,"The Knowledge Explorer starts empty. "),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"Spike Knowledge Explorer",src:n(9973).Z,width:"1562",height:"500"})),(0,l.kt)("p",null,"Using the Help Button, you can branch into this and related Confluence pages."),(0,l.kt)("p",null,'Using the "Ask me!" box, you may either write down your question or even dictate a phrase when pressing the "X" button.'),(0,l.kt)("p",null,"If you manually write your text, you must choose an appropriate skill in the Skill Combobox before pressing enter."),(0,l.kt)("p",null,"If you dictate, any recognized skill (depending on the phrase that is understood) will be automatically chosen und you just need to press enter (after eventually correcting any errors - the case and punctuation of the phrases is ignored/irrelevant btw)."),(0,l.kt)("p",null,'When there is no skill or the phrase will not lead to any reasonable inference and hence knowledge result, Catena-X may answer "WTF?"'),(0,l.kt)("h2",{id:"part-tracing-skill"},"Part Tracing Skill"),(0,l.kt)("p",null,'Try to dictate "Show me all vehicles which contain glue" - the phrase which contain is the marker for Catena-X to choose the Part Tracing Skill. The following phrase glue will be used as the parameter to the skill and you could try to experiment with other materials such as palladium, copper or cathode material.'),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"Spike Part Tracing Skill",src:n(2366).Z,width:"1560",height:"933"})),(0,l.kt)("p",null,"After successful execution (remember to press enter in the Ask Me! box), the explorer will show the generated knowledge results from the query in the form of little cards."),(0,l.kt)("p",null,'At the same time, the chosen agent will give you an aggregated summary in speech ("Hi Schorsch! There are 10 vehicles which contain glue." - the username is currently still hardoded, unfortunately).'),(0,l.kt)("h2",{id:"switching-agents-and-the-material-aggregation-skill"},"Switching Agents and the Material Aggregation Skill"),(0,l.kt)("p",null,'No try to dictate or write "Hi Tina" which is the phrase to let Catena-X switch the underlying agent engine (other options are Cortana, Stefan, Helga). '),(0,l.kt)("p",null,"The agent will give you a hint by making a characteristic sound with its voice."),(0,l.kt)("p",null,'When uttering "How much cathode material is in vehicle model a", TINA will then compute the average weight of the chosen material in the given series (and the individual weight for each car on the resulting cards).'),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"Spike Material Skill",src:n(3198).Z,width:"1566",height:"934"})),(0,l.kt)("h2",{id:"german-speech-output-and-the-lot-impact-skill"},"German Speech Output and the Lot Impact Skill"),(0,l.kt)("p",null,'Finally, you can switch to a German-Speaking Agent "Helga" by using the Agent Combobox selection.'),(0,l.kt)("p",null,'Try to dictate - still in english, the input language is currently hardcoded -  "Which components are affected by lot 12949" (where you need to pronounce the digits each isolated - so like "one two nine four nine").'),(0,l.kt)("p",null,"And Helga will give you a trace of aggregate components (and the material inside) and the number of cars affected by the given lot number (prefix). "),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"Spike Lot Skill",src:n(3198).Z,width:"1566",height:"934"})),(0,l.kt)("h2",{id:"how-to-i-extend-skills"},"How to I extend skills?"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://github.com/drcgjung/tractusx/blob/dd67f0b99ad8c4c02acc644606908f566076212a/portal/code/tractus-x-portal/src/components/knowledgeagent/data.ts"},"This piece of frontend code")," shows how easy it is to implement new skills and conversations using this approach."))}h.isMDXComponent=!0},9973:function(e,t,n){t.Z=n.p+"assets/images/spike_knowledge_explorer-82e5e3182a2d6878058f5477d53e4195.png"},6113:function(e,t,n){t.Z=n.p+"assets/images/spike_login-37a0ab8693fef1d9a975134ed4ba14af.png"},3198:function(e,t,n){t.Z=n.p+"assets/images/spike_material_skill-4e6c80ddcaa608f06427d6c132fdad0d.png"},2366:function(e,t,n){t.Z=n.p+"assets/images/spike_part_tracing_skill-dda55bf7ee506ad87ec115abfafc7cb1.png"}}]);